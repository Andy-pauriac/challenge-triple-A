<html lang="fr">

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="5" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/template.css') }}">
    <title>Dashboard</title>
</head>

<main>
    <header class="title">
        <h1 class="oswald_text">Dashboard Monitoring</h1>

    </header>

    <body>
        <div class="section_title">
            <h2 class="oswald_text">Section Système et Réseau</h2>
        </div>
        <section class="div_parent">
            <div class="dashboard_div_parent">
                <div class="dashboard_div">
                    <h3 class="oswald_text">Système</h3>
                    <p>Nom de session : {{ host_name }}</p>
                    <p>Système d'exloitation : {{ os }} {{ os_release }}</p>
                    <p>Uptime : {{ uptime }}</p>
                    <p>Nombre d'utilisateur : {{ user_number }} </p>
                </div>
            </div>
            <div class="dashboard_div_parent">
                <div class="dashboard_div">
                    <h3 class="oswald_text">Réseau</h3>
                    <p>Adresse IPV4 : {{ ipv4.ip }} </p>
                    <p>Adresse IPV6 : {{ ipv6.ip }} </p>
                    <p>Statut : {{ status }} </p>
                </div>
            </div>
        </section>

        <div class="section_title">
            <h2 class="oswald_text">Section CPU et RAM</h2>
        </div>
        <section class="div_parent">
            <div class="dashboard_div_parent">
                <div class="dashboard_div">
                    <h3 class="oswald_text">CPU</h3>
                    <p> CPU : {{ cpu_cores }}</p>
                    <p> Pourcentage du CPU : {{ cpu_percent }}% </p>
                    <p>Fréquence actuelle du CPU : {{ cpu_freq.current }} MHz</p>
                    <p>Fréquence minimale du CPU : {{ cpu_freq.min }} MHz</p>
                    <p>Fréquence maximale du CPU : {{ cpu_freq.max }} MHz</p>
                </div>
            </div>
            <div class="dashboard_div_parent">
                <div class="dashboard_div">
                    <h3 class="oswald_text">Mémoire</h3>
                    <p>RAM totale : {{ ram_total }} Go</p>
                    <p>RAM utilisé : {{ ram_used }} Go</p>
                    <p>RAM disponible : {{ ram_available }} Go</p>
                    <p>Pourcentage : {{ ram_percent }}% </p>
                </div>
            </div>
        </section>

        <div class="section_title">
            <h2 class="oswald_text">Processus les plus gourmands : </h2>
        </div>
        <section class="div_parent">
            <div class="dashboard_div_parent">
                <div class="dashboard_div_files">
                    <table class="files_table" border="1" cellpadding="4">
                        <tr>
                            <th>Nom</th>
                            <th>PID</th>
                            <th>% CPU</th>
                        </tr>
                        {%for cpu,pid,name in procslist_cpu%}
                        <tr>
                            <td>{{name}}</td>
                            <td>{{pid}}</td>
                            <td>{{cpu}}%</td>
                        </tr>
                        {%endfor%}
                    </table>
                </div>
                <div class="dashboard_div_files">
                    <table class="files_table" border="1" cellpadding="4">
                        <tr>
                            <th>Nom</th>
                            <th>PID</th>
                            <th>% RAM</th>
                        </tr>
                        {%for ram,pid,name in procslist_ram%}
                        <tr>
                            <td>{{name}}</td>
                            <td>{{pid}}</td>
                            <td>{{ram}}%</td>
                        </tr>
                        {%endfor%}
                    </table>
                </div>
            </div>
        </section>

        <div class="section_title">
            <h2 class="oswald_text">Section Fichier</h2>
        </div>
        <section class="div_parent">
            <div class="dashboard_div_parent">
                <div class="dashboard_div_files">
                    <p>Dossier analysé : {{ root_directory }}</p>
                    <p>Nombre total de fichiers (.txt, .py, .pdf, .jpg) : {{ total_files }}</p>

                    <table class="files_table" border="1" cellpadding="4"> 
                        <tr>
                            <th>Extension</th>
                            <th>Nombre de fichiers</th>
                            <th>Pourcentage</th>
                        </tr>
                        {% for ext, count in counts.items() %}
                        <tr>
                            <td>{{ ext }}</td>
                            <td>{{ count }}</td>
                            <td>
                                {% if total_files > 0 %}
                                {{ (count / total_files * 100) | round(1) }} %
                                {% else %}
                                0.0 %
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </section>
    </body>

    <footer class="title">
        <h4>Dashboard de Axel, Dorian et Andy</h4>
    </footer>
</main>

</html>